name: Hourly Windows Python Script

# 1. 設定觸發條件 (每小時執行)
on:
  schedule:
    # cron 語法：'0 * * * *' 代表每小時的 0 分鐘執行一次 (例如 UTC 1:00, 2:00 等)
    # ⚠️ 注意：GitHub Actions 的定時任務一律使用 UTC (世界標準時間)
    - cron: '0 * * * *'
  
  # 允許手動執行，方便測試
  workflow_dispatch:

# 2. 定義工作 (Jobs)
jobs:
  run-hourly-script-on-windows:
    # 指定在最新的 Windows 虛擬機上運行，模擬 Win11 環境
    runs-on: windows-latest
    
    # 3. 定義步驟 (Steps)
    steps:
      # 步驟 A: 下載儲存庫程式碼
      - name: Checkout repository code
        uses: actions/checkout@v4
      
      # 步驟 B: 設定 Python 環境
      # actions/setup-python 會自動在 Windows 虛擬機上設定 Python
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.x' # 指定使用的 Python 版本
          # 在 Windows 上，可以明確指定架構 (x64 通常是預設值)
          architecture: 'x64' 
          
      # 步驟 C (如果需要): 安裝 Python 依賴套件
      # 如果您的腳本依賴外部套件，請確保您的儲存庫中有 requirements.txt
      # - name: Install dependencies
      #   run: pip install -r requirements.txt
          
      # 步驟 D: 執行您的 Python 腳本
      # 在 Windows 虛擬機上，使用 `python` 運行腳本
      - name: Execute the hourly script
        run: python 小時即時-自動.py

      # 步驟 E (可選): 提交腳本產生的變更 (例如日誌或資料文件)
      # 如果您的 Python 腳本會修改或產生文件，您需要這個步驟將變更推回儲存庫
      # - name: Commit and Push changes (Optional)
      #   run: |
      #     git config --local user.email "action@github.com"
      #     git config --local user.name "GitHub Action"
      #     git add .
      #     git commit -m "Automated hourly data update [Windows Runner]" --allow-empty
      # - name: Push changes
      #   uses: ad-m/github-push-action@master
      #   with:
      #     github_token: ${{ secrets.GITHUB_TOKEN }}
      #     branch: ${{ github.ref }}